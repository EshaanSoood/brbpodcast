/* Post grid: force 2 columns on md and up */
@media (min-width: 768px) {
	.post-list {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
		gap: 20px; /* base gap, overlaps will visually cross this */
	}
}

/* Widen nav active trapezoid underline on desktop */
@media (min-width: 1024px) {
	.nav-link.is-active::after {
		width: 80% !important; /* was var(--nav-trapezoid-w) ~70% */
	}
}

/* Reviews/Podcasts listing: desktop rows + mobile cards */
.reviews-list {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

/* Desktop row style */
@media (min-width: 768px) {
	.review-row {
		display: block;
		text-decoration: none;
		background: var(--color-background-offwhite, #faf8f5);
		box-shadow: 0 2px 6px rgba(101,79,132,0.12);
		transition: transform 520ms ease, box-shadow 520ms ease;
	}
	.review-row:hover,
	.review-row:focus-visible {
		transform: translateY(-2px) scale(1.015);
		box-shadow: 0 8px 22px rgba(101,79,132,0.18);
	}
	.review-row-inner {
		padding: 14px 16px 16px;
	}
	.review-row-title { font-size: 1.05rem; color: var(--color-purple-darkest, #654f84); margin: 0 0 2px; }
	.review-row-sub { color: var(--color-purple-dark, #a295b5); margin: 0 0 4px; }
	.review-row-meta { font-size: 0.9rem; color: var(--color-purple-dark, #a295b5); display: flex; gap: 10px; margin-bottom: 4px; }
	.review-row-excerpt { color: #3f3652; opacity: 0.9; }
}

/* Mobile card vibe: overlap like homepage, show newest card and next headline peeking */
@media (max-width: 767px) {
	.review-row { display: block; text-decoration: none; }
	.review-row.card-frame { margin-bottom: -8px; }
	.reviews-list .review-row:nth-child(2) .review-row-inner { padding-top: 8px; }
	/* Ensure only first card is full; others are compact */
	.reviews-list .review-row:nth-child(1) .review-row-inner { padding: 14px 16px 16px; }
	.reviews-list .review-row:nth-child(n+2) .review-row-inner { padding: 8px 16px; }
	.reviews-list .review-row:nth-child(n+2) .review-row-sub, 
	.reviews-list .review-row:nth-child(n+2) .review-row-excerpt { display: none; }
	.reviews-list .review-row:nth-child(n+2) .review-row-meta { font-size: 0.85rem; opacity: 0.85; }
}

/* Entry header typography refinements */
.post-header .post-title { margin: 0 0 4px; }
.post-header .post-subtitle { margin: 0 0 6px; }
.post-header .post-meta { margin: 0 0 12px; display: flex; gap: 10px; align-items: baseline; }
.post-header .post-author { font-family: Helvetica, Arial, ui-sans-serif, system-ui; }
.post-header .post-date { font-family: Helvetica, Arial, ui-sans-serif, system-ui; }

/* Footer social: horizontal with brand tint */
.site-footer .social-links {
	display: flex;
	gap: 14px;
	margin-top: 6px;
	color: var(--color-purple-darkest, #654f84);
}
.site-footer .social-links a:hover,
.site-footer .social-links a:focus-visible {
	color: var(--color-pink-light, #e8c3d6);
	transition: color 160ms ease;
}

/* Desktop hero sizing + subtle jagged bottom border */
@media (min-width: 1024px) {
	.site-main .hero {
		position: relative;
		/* target ~3.5/9 of 16:9 viewport minus nav height */
		min-height: calc(39vh - var(--nav-height));
		padding-block: 20px; /* tighten large spacing */
	}
	.site-main .hero::after {
		content: "";
		position: absolute;
		left: 0;
		right: 0;
		bottom: -1px;
		height: var(--nav-height);
		background-color: var(--color-pink-light, #e8c3d6);
		/* create a subtle jagged/sawtooth edge using a mask */
		-webkit-mask-image: repeating-linear-gradient(-45deg, #000 0 10px, transparent 10px 20px);
		mask-image: repeating-linear-gradient(-45deg, #000 0 10px, transparent 10px 20px);
		opacity: 0.85;
	}
}

/* Image frames: small/medium/large, rectangle and square
   - Adaptive to portrait/landscape via object-fit: contain
   - Chamfered corners (light angle), straight edges in purple, chamfers accented pink
   Usage:
     <figure class="img-frame img-rect-m"><img class="img-media" src="..." alt="..." /></figure>
     <figure class="img-frame img-square-s">...</figure>
*/
.img-frame {
	position: relative;
	display: block;
	overflow: hidden;
	/* Images should touch the frame (no inner padding) */
	padding: 0;
	/* External spacing so surrounding text never crowds the border */
	margin: 0.75rem 0 1rem;
	--b: 3px; /* border thickness */
	--c: 8px; /* chamfer size - keep light */
	--edge: var(--color-purple-dark, #a295b5);
	--chamfer: var(--color-pink-light, #e8c3d6);
	background: var(--color-background-offwhite, #faf8f5);
	clip-path: polygon(
		var(--c) 0%,
		calc(100% - var(--c)) 0%,
		100% var(--c),
		100% calc(100% - var(--c)),
		calc(100% - var(--c)) 100%,
		var(--c) 100%,
		0% calc(100% - var(--c)),
		0% var(--c)
	);
	/* Subtle dark purple drop shadow to feel like a cut-out */
	box-shadow: 0 4px 10px rgba(101,79,132,0.10), 0 1px 3px rgba(101,79,132,0.14);
}

/* Homepage post cards: framed 4:5 tiles, full-card link, subtle overlap */
.post-list {
	display: grid;
	grid-template-columns: 1fr;
	gap: 16px;
}

@media (min-width: 768px) {
	.post-list {
		grid-template-columns: repeat(2, minmax(0, 1fr));
	}
}

.post-card.card-frame {
	position: relative;
	display: block;
	text-decoration: none;
	background: var(--color-background-offwhite, #faf8f5);
	/* subtle dark purple shadow */
	box-shadow: 0 4px 10px rgba(101,79,132,0.10), 0 1px 3px rgba(101,79,132,0.14);
	/* padding for text content */
	padding: 14px 16px 16px;
	/* create room for the chamfered border */
	overflow: hidden;
}

/* 4:5 media region */
.post-card.card-frame .card-media {
	position: relative;
	width: 100%;
	/* 4:5 (W:H) â†’ aspect-ratio: 4 / 5 */
	aspect-ratio: 4 / 5;
	margin-bottom: 12px;
}

.post-card.card-frame .card-media img {
	position: absolute;
	inset: 0;
	width: 100%;
	height: 100%;
	object-fit: cover;
	background: transparent;
}

/* Chamfered frame with chunky pink strokes on chamfered edges only */
.post-card.card-frame::before,
.post-card.card-frame::after {
	content: "";
	position: absolute;
	inset: 0;
	pointer-events: none;
	clip-path: polygon(
		var(--c, 10px) 0%,
		calc(100% - var(--c, 10px)) 0%,
		100% var(--c, 10px),
		100% calc(100% - var(--c, 10px)),
		calc(100% - var(--c, 10px)) 100%,
		var(--c, 10px) 100%,
		0% calc(100% - var(--c, 10px)),
		0% var(--c, 10px)
	);
}

/* Straight edges (purple) using side gradients below the chamfers */
.post-card.card-frame::before {
	--b: 3px;
	--edge: var(--color-purple-dark, #a295b5);
	background:
		linear-gradient(var(--edge), var(--edge)) top/100% var(--b) no-repeat,
		linear-gradient(var(--edge), var(--edge)) bottom/100% var(--b) no-repeat,
		linear-gradient(var(--edge), var(--edge)) left/var(--b) 100% no-repeat,
		linear-gradient(var(--edge), var(--edge)) right/var(--b) 100% no-repeat;
}

/* Chunky chamfer accents (pink) only at the chamfered corners */
.post-card.card-frame::after {
	--b: 4px; /* chunky stroke */
	--chamfer: var(--color-pink-light, #e8c3d6);
	box-shadow:
		inset var(--b) var(--b) 0 0 var(--chamfer),
		inset calc(-1*var(--b)) calc(-1*var(--b)) 0 0 var(--chamfer);
	opacity: 0.9;
}

/* Angle variants (skew the frame slightly). Keep assortment static */
.card-angle-9  { --card-angle: -9deg;  transform: skewX(var(--card-angle)); }
.card-angle-11 { --card-angle: -11deg; transform: skewX(var(--card-angle)); }
.card-angle-13 { --card-angle: -13deg; transform: skewX(var(--card-angle)); }
.card-angle-16 { --card-angle: -16deg; transform: skewX(var(--card-angle)); }

/* Unskew inner content so text/media are readable */
.post-card.card-frame .card-media,
.post-card.card-frame .post-card-content { transform: skewX(calc(-1 * var(--card-angle, 0deg))); }

/* Spacing for content */
.post-card-title { margin: 6px 0 2px; }
.post-card-meta { font-size: 0.9rem; opacity: 0.85; margin-bottom: 6px; }
.post-card-excerpt { margin-top: 6px; }

/* Homepage specialized cards */
@media (min-width: 768px) {
  .card-review .card-inner { padding: 14px 16px 16px; }
  .card-review .card-title { margin: 0 0 8px; color: var(--color-purple-darkest, #654f84); }
  .card-review .card-bottom { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items: center; }
  .card-review .card-left { display: grid; grid-template-rows: 1fr auto; gap: 10px; }
  .card-review .card-quote { color: #3f3652; opacity: 0.95; }
  .card-review .card-actions .btn-trapezoid { display: inline-block; }
  .card-review .card-right { display: flex; justify-content: center; }
  .card-image.card-image-square { aspect-ratio: 1 / 1; width: 100%; max-width: 220px; display: flex; align-items: center; justify-content: center; }
  .card-image.card-image-square img { width: 100%; height: 100%; object-fit: cover; }

  .card-podcast .card-inner { padding: 14px 16px 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; align-items: center; }
  .card-podcast .card-left { display: grid; grid-template-rows: 2fr 2fr 1fr; gap: 8px; align-items: center; }
  .card-podcast .card-title { margin: 0; color: var(--color-purple-darkest, #654f84); }
  .card-podcast .card-sub { color: var(--color-purple-dark, #a295b5); margin: 0; }
  .card-podcast .card-actions .btn-trapezoid { display: inline-block; }
  .card-podcast .card-right { display: flex; justify-content: center; }
  .card-image.card-image-portrait { aspect-ratio: 4 / 5; width: 100%; max-width: 240px; display: flex; align-items: center; justify-content: center; }
  .card-image.card-image-portrait img { width: 100%; height: 100%; object-fit: cover; }
}

@media (max-width: 767px) {
  .card-review .card-right, .card-podcast .card-right { display: none; }
  .card-review .card-inner, .card-podcast .card-inner { padding: 14px 16px 16px; }
}

/* Subtle overlaps: right tile overlaps left; lower overlaps upper */
@media (min-width: 768px) {
	.post-list > .post-card { position: relative; }
	.post-list > .post-card:nth-child(2n) { /* right column */
		margin-left: -10px; /* subtle horizontal overlap */
		z-index: 2;
	}
	.post-list > .post-card:nth-child(n+3) { /* second row and below */
		margin-top: -12px; /* subtle vertical overlap */
	}
}

/* Ensure overlaps remain subtle on mobile (single column) */
@media (max-width: 767px) {
	.post-list > .post-card { margin-left: 0; margin-top: 0; }
}

.post-content img { display: none; }

.img-frame::before {
	content: "";
	position: absolute;
	inset: 0;
	pointer-events: none;
	/* Straight-edge frame using 4 side gradients (purple) */
	background:
		linear-gradient(var(--edge), var(--edge)) top/100% var(--b) no-repeat,
		linear-gradient(var(--edge), var(--edge)) bottom/100% var(--b) no-repeat,
		linear-gradient(var(--edge), var(--edge)) left/var(--b) 100% no-repeat,
		linear-gradient(var(--edge), var(--edge)) right/var(--b) 100% no-repeat;
	clip-path: inherit;
}

.img-frame::after {
	content: "";
	position: absolute;
	inset: 0;
	pointer-events: none;
	/* Subtle chamfer accents using inner shadows at corners (pink) */
	box-shadow:
		inset var(--b) var(--b) 0 0 var(--chamfer),
		inset calc(-1*var(--b)) calc(-1*var(--b)) 0 0 var(--chamfer);
	/* Keep effect light */
	opacity: 0.8;
	clip-path: inherit;
}

.img-media {
	width: 100%;
	height: 100%;
	display: block;
	object-fit: contain; /* scale down proportionally, no cropping */
	background: transparent;
}

/* Aspect + size presets */
.img-rect-s { aspect-ratio: 16 / 9; max-width: 320px; }
.img-rect-m { aspect-ratio: 16 / 9; max-width: 560px; }
.img-rect-l { aspect-ratio: 16 / 9; max-width: 800px; }

.img-square-s { aspect-ratio: 1 / 1; max-width: 240px; }
.img-square-m { aspect-ratio: 1 / 1; max-width: 360px; }
.img-square-l { aspect-ratio: 1 / 1; max-width: 480px; }

/* Let frames expand to container width on small screens */
@media (max-width: 767px) {
	.img-rect-s, .img-rect-m, .img-rect-l,
	.img-square-s, .img-square-m, .img-square-l {
		width: 100%;
		max-width: 100%;
	}
}

/* Slightly increase chamfer on desktop for presence, still light */
@media (min-width: 1024px) {
	.img-frame { --c: 10px; }
}

/* Slightly increase safe outer spacing on tablet+ */
@media (min-width: 768px) {
	.img-frame { margin: 1rem 0 1.25rem; }
}

/* Editor block responsive two-column layout */
@media (min-width: 768px) {
	.editor-block {
		grid-template-columns: 1fr 420px; /* text + medium image column */
	}
}

/* Ensure "special" heading treatments are only for page headings.
   Regular headings in review/podcast content should be plain but branded. */
.page-header .page-title { /* keep special page heading styles */ }
.page-title-bg::before { /* keep ghosted background title */ }

.post-content h1,
.post-content h2,
.post-content h3,
.post-content h4,
.post-content h5,
.post-content h6 {
	font-family: var(--font-heading, 'Bebas Neue', ui-sans-serif, system-ui, sans-serif) !important;
	color: var(--color-purple-darkest, #654f84) !important;
	text-transform: none;
	letter-spacing: normal;
	background: none;
	box-shadow: none;
	border: 0;
}
