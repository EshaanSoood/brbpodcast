<header class="site-header">
  <div class="hidden md:flex items-center gap-[var(--nav-spacing)] py-2 px-3 text-purple-darkest">
    <a href="{{ '/' | relative_url }}" class="flex items-center" aria-label="Home">
      <img src="{{ '/assets/images/btb-logo-clean.png' | relative_url }}" alt="{{ site.title }}" class="h-[var(--nav-height)] w-auto" />
    </a>
    <nav aria-label="Primary" class="nav-row flex items-center gap-[var(--nav-spacing)]">
      <a href="{{ '/' | relative_url }}" class="nav-link{% if page.url == '/' %} is-active{% endif %}" style="--item-skew: var(--nav-skew-1);">Home</a>
      <a href="{{ '/mission/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-2);">Mission</a>
      <a href="{{ '/reviews/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-3);">Reviews</a>
      <a href="{{ '/podcasts/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-4);">Podcasts</a>
      <a href="{{ '/contact/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-5);">Contact</a>
      <a href="#" class="btn-trapezoid">Subscribe</a>
    </nav>
  </div>
  <div class="md:hidden py-2 px-3 text-purple-darkest">
    <div class="flex items-center justify-between">
      <a href="{{ '/' | relative_url }}" class="flex items-center" aria-label="Home">
        <img src="{{ '/assets/images/btb-logo-clean.png' | relative_url }}" alt="{{ site.title }}" class="h-[var(--nav-mobile-height)] w-auto logo-mobile" />
      </a>
      <details class="mobile-nav">
        <summary class="hamburger-btn" role="button" aria-label="Menu" aria-controls="primary-nav" aria-expanded="false">Menu</summary>
        <nav id="primary-nav" aria-label="Primary" class="nav-col flex flex-col gap-[var(--nav-spacing-mobile)] mt-2">
          <a href="{{ '/' | relative_url }}" class="nav-link{% if page.url == '/' %} is-active{% endif %}" style="--item-skew: var(--nav-skew-1);">Home</a>
          <a href="{{ '/mission/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-2);">Mission</a>
          <a href="{{ '/reviews/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-3);">Reviews</a>
          <a href="{{ '/podcasts/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-4);">Podcasts</a>
          <a href="{{ '/contact/' | relative_url }}" class="nav-link" style="--item-skew: var(--nav-skew-5);">Contact</a>
        </nav>
      </details>
    </div>
  </div>
  <script>
  (function(){
    var details = document.currentScript && document.currentScript.previousElementSibling && document.currentScript.previousElementSibling.previousElementSibling;
    // Fallback: query within this header
    if(!details){ details = document.querySelector('header.site-header details.mobile-nav'); }
    if(!details) return;
    var summary = details.querySelector('summary.hamburger-btn');
    var nav = details.querySelector('#primary-nav');
    if(summary){
      var sync = function(){ summary.setAttribute('aria-expanded', details.hasAttribute('open') ? 'true' : 'false'); };
      details.addEventListener('toggle', sync);
      sync();
      // Close on Escape
      details.addEventListener('keydown', function(e){ if(e.key === 'Escape'){ details.removeAttribute('open'); summary.focus(); } });
    }
    if(nav){
      nav.addEventListener('click', function(e){
        var t = e.target;
        if(t && t.tagName === 'A'){ details.removeAttribute('open'); }
      });
    }
  })();
  </script>
</header>

